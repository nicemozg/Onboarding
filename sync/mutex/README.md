### Использование мьютекса для безопасной работы с общими данными в Go

В этом примере демонстрируется использование мьютекса (`sync.Mutex`) для обеспечения безопасного доступа к общей переменной из нескольких горутин в языке программирования Go.

#### Что делает этот код?

1. **Объявление переменных**:
    - `counter int`: Переменная `counter`, используемая для подсчета операций.
    - `mu sync.Mutex`: Мьютекс, который будет использоваться для синхронизации доступа к переменной `counter` из нескольких горутин.

2. **Основная функция `main`**:
    - Создается переменная `wg` типа `sync.WaitGroup`, чтобы дождаться завершения всех горутин.
    - Цикл `for` от `0` до `9` (10 итераций) создает 10 горутин.

3. **Создание горутин**:
    - Для каждой итерации цикла вызывается `wg.Add(1)`, чтобы добавить одну горутину в `WaitGroup`.
    - Внутри каждой горутины запускается анонимная функция (`go func() { ... }()`).

4. **Анонимная функция**:
    - Вызывает `defer wg.Done()` для уменьшения счетчика `WaitGroup` после завершения выполнения функции.
    - Вызывает `mu.Lock()` для блокировки мьютекса перед изменением `counter`.
    - Инкрементирует `counter` (увеличивает на 1).
    - Вызывает `mu.Unlock()` для разблокировки мьютекса после завершения изменения `counter`.

5. **Ожидание завершения всех горутин**:
    - После запуска всех горутин методом `wg.Add(1)`, вызывается `wg.Wait()`, который блокирует выполнение основной горутины до тех пор, пока счетчик `WaitGroup` не станет равным нулю (все горутины завершатся).

6. **Вывод результата**:
    - После завершения всех горутин выводится значение переменной `counter` с помощью `fmt.Println("Counter:", counter)`.

#### Работа с мьютексом

- `sync.Mutex` используется для защиты переменной `counter` от гонок данных, которые могут возникнуть при одновременном доступе нескольких горутин к изменению `counter`.
- Вызов `mu.Lock()` блокирует мьютекс и предотвращает доступ других горутин к критической секции, пока текущая горутина не завершит работу с `counter`.
- После завершения работы с `counter` вызывается `mu.Unlock()`, чтобы разблокировать мьютекс и разрешить другим горутинам получить доступ к критической секции.

#### Заключение

Этот код иллюстрирует использование мьютекса для безопасной работы с данными в многопоточной среде на языке Go. Благодаря мьютексу `counter` корректно увеличивается на 10 (по одному разу в каждой из 10 горутин), и выводится правильное значение `Counter: 10`.

___

## Глобальный мьютекс `mu`:
- Он объявлен в глобальной области видимости и может использоваться несколькими функциями для синхронизации доступа к общим данным.

#### Структура `Data`:
- Содержит поле `Value`, к которому необходимо обеспечить безопасный доступ.

#### Функция `main`:
- Создает экземпляр `Data` и запускает две горутины (`increment` и `decrement`), которые изменяют `data.Value`.
- Использует `WaitGroup` для ожидания завершения всех горутин.

#### Функции `increment` и `decrement`:
- Принимают указатель на `Data` и используют мьютекс `mu` для блокировки и разблокировки доступа к полю `Value`.

#### Заключение:
Использование глобального мьютекса и передача его как параметра в функции позволяет эффективно управлять доступом к общим данным из различных частей программы. Этот подход особенно полезен при работе с конкурентными операциями и защитой общих ресурсов от гонок данных в многопоточной среде Go.

